version: "3"
services:
  gateway:
    image: ghcr.io/defguard/gateway:latest
    environment:
      DEFGUARD_GRPC_URL: <URL_OF_YOUR_DEFGUARD_GRPC_SERVICE> # If it's on the same machine it's localhost:50055
      DEFGUARD_STATS_PERIOD: 60
      DEFGUARD_TOKEN: <DEFGUARD_TOKEN>
      DEFGUARD_GRPC_CA: /ssl/defguard-ca.pem
      RUST_LOG: debug
    ports:
      # wireguard endpoint
      - "50051:50051/udp"
    volumes:
      # SSL setup guide: https://defguard.gitbook.io/defguard/features/setting-up-your-instance/docker-compose#ssl-setup
      - ./.volumes/ssl:/ssl
    cap_add:
      - NET_ADMIN
